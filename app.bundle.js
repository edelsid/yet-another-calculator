(()=>{"use strict";const t=document.querySelector(".widget"),i=new class{constructor(t){this.operation=void 0,this.firstFigure="0",this.secondFigure="0",this.result=void 0,this.bindToDOM(t)}bindToDOM(t){if(!(t instanceof HTMLElement))throw new Error("container is not HTMLElement");this.numbers=t.querySelector(".numbers"),this.operations=t.querySelector(".operations"),this.display=t.querySelector(".display")}init(){this.numbers.addEventListener("click",(t=>this.operationCheck(t.target.id))),document.body.addEventListener("keydown",(t=>this.keyboardEvent(t))),this.operations.addEventListener("click",(t=>this.setOperation(t.target.id))),this.changeDisplay(this.firstFigure)}operationCheck(t){this.operation?this.setFigure(t,"secondFigure"):this.setFigure(t,"firstFigure")}keyboardEvent(t){const{ctrlKey:i,altKey:e,shiftKey:s}=t;let{key:r}=t;i||e||s||("Enter"===r&&(r="="),/(c|=|\+|-|\*|\/){1}/gi.test(r)?this.setOperation(r):/\d|\./g.test(r)&&this.operationCheck(r))}setFigure(t,i){this[i].toString().includes(".")&&"."===t||("0"===this[i]&&"."===t?this[i]="0.":"0"===this[i]?this[i]=t:this[i]+=t,"firstFigure"!==i?this.changeDisplay(`${this.firstFigure} ${this.operation} ${this.secondFigure}`):this.changeDisplay(this.firstFigure))}setOperation(t){return"C"===t||"c"===t?(this.firstFigure="0",this.changeDisplay(this.firstFigure),void this.clear()):this.operation||"="===t?void(this.operation&&"="===t&&this.proceed()):(this.operation=t,void this.changeDisplay(`${this.firstFigure} ${t}`))}proceed(){const t=Number(this.firstFigure),i=Number(this.secondFigure);switch(this.operation){case"-":this.result=t-i;break;case"*":this.result=t*i;break;case"/":this.result=t/i;break;default:this.result=t+i}this.result.toString().length>5&&(this.result=Number(this.result.toPrecision(5))),this.firstFigure=this.result,this.changeDisplay(this.result),this.clear()}changeDisplay(t){this.display.innerHTML=t}clear(){this.secondFigure="0",this.operation=void 0,this.result=void 0}}(t);i.init()})();